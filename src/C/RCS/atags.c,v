head	1.1;
access;
symbols;
locks
	mccorkle:1.1; strict;
comment	@ * @;


1.1
date	2005.06.13.21.05.27;	author mccorkle;	state Exp;
branches;
next	1.0;

1.0
date	2004.03.23.16.31.23;	author mccorkle;	state Exp;
branches;
next	0.11;

0.11
date	2004.02.06.20.42.50;	author mccorkle;	state Exp;
branches;
next	0.10;

0.10
date	2003.03.19.16.21.06;	author mccorkle;	state Exp;
branches;
next	0.9;

0.9
date	2003.01.21.01.18.16;	author mccorkle;	state Exp;
branches;
next	0.8;

0.8
date	2003.01.15.10.46.41;	author mccorkle;	state Exp;
branches;
next	0.7;

0.7
date	2003.01.14.21.48.29;	author mccorkle;	state Exp;
branches;
next	0.6;

0.6
date	2003.01.14.10.49.49;	author mccorkle;	state Exp;
branches;
next	0.5;

0.5
date	2003.01.10.22.28.35;	author mccorkle;	state Exp;
branches;
next	0.4;

0.4
date	2003.01.10.22.27.04;	author mccorkle;	state Exp;
branches;
next	0.3;

0.3
date	2003.01.10.22.22.27;	author mccorkle;	state Exp;
branches;
next	0.2;

0.2
date	2003.01.10.12.39.42;	author mccorkle;	state Exp;
branches;
next	0.1;

0.1
date	2003.01.10.03.01.59;	author mccorkle;	state Exp;
branches;
next	;


desc
@Simple enzyme-defined tags (precursor to GSTs, only no fragmenting, just
anchor enzyme sites)
@


1.1
log
@Logan Everitt flushed out a bug with MAX_CBUFF_LEN. fixed.
@
text
@/* Program:       atags                                                       */
/* Programmer:    Sean R. McCorkle  (mccorkle@@bnl.gov)                        */
/*                Biology Department, Brookhaven National Laboratory          */
/* Language:      C                                                           */
/*                                                                            */
/* Description:   Read genome sequence, print all GST tags derived from a     */
/*                a specified restriction enzyme                              */
/*                                                                            */
/* Usage:         atags [-hFSvV] [-a<seq>] [-e<n>] [seq-file ... ]            */
/*                                                                            */
/*                where [seq-files] are in FASTA format.  The name "-" means  */
/*                stdin.  stdin is scanned it no filemames are specified.     */
/*                                                                            */
/* Options:       -a<seq> use <seq> as anchor enzyme sequence (def. CATG)     */
/*                -e<n>   tag extent <n>, (default 17)                        */
/*                -h      print help message                                  */
/*                -l<seq> append linker sequence <seq> to short tags          */
/*                        (default GGATCCGAAGGGGTTCG)                         */
/*                -n<n>   number sequences starting at <n>                    */
/*                -F      Show fragment numbers                               */
/*                -S      Show sequence names instead of numbers              */
/*                -v      verbose mode                                        */
/*                -V      print version                                       */
/*                                                                            */
/* Caveats:       Sequence characters other than standard nucleotide and      */
/*                ambiguity codes will not be detected and will cause         */
/*                undefined behavior.  GIGO                                   */
/*                                                                            */
/* Compiling:     cc -O -o atags atags.c                                      */
/*                                                                            */
/*                  - usually does the job on most unix platforms             */
/*                    (including MacOSX)                                      */
/*                                                                            */
/* Notes:         What is lacking, but eventually planned:                    */
/*                    1) restriction enzyme sequences can't contain           */
/*                       ambiguity codes (or be regexps).                     */
/*                    2) ambiguity codes in sequences do not match properly   */
/*                    3) shorts are proprely handled, but not internal        */
/*                       tags with short lengths between anchor sites         */
/*                                                                            */
/* $Id: atags.c,v 1.0 2004/03/23 16:31:23 mccorkle Exp mccorkle $             */
/*                                                                            */
/******************************************************************************/

#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#ifndef SOLARIS        /* Sun's are really a pain in the neck sometimes */
#include <unistd.h>    /* for getopt(), BSD, Irix, Linux */
#endif


       /* various globals set by command line args and options */

char *anch_enz = "CATG";   /* anchor enzyme seq., set by -a, default NlaIII */
int   tag_ext  = 17;       /* tag extent, set by -e, default for MmeI       */
int   verbose  = 0;        /* verbose mode, set by -v                       */
int   internals= 0;        /* show internal tags, set by -I                 */
char *linker   = "GGATCCGAAGGGGTTCG";         /* linker sequence, set by -l */
int   seqnames = 0;        /* set by -S */
int   fragnumbers = 0;     /* set by -F */

#define  MAX_TAG_EXT    10000
#define  MAX_HDR_LEN      256
#define  MAX_ANCH_LEN     100

char header[MAX_HDR_LEN+1];

int  anch_enz_len;

       /* state variables */

int  pos;                  /* current position in genome sequence.  set and  */
                           /* incremented by init_cbuff() and insert()       */

int  seq_num = 0;          /* current sequence number.  possibly set by -n,  */
                           /* and incremented in new_sequence()              */

int  frag_num = 0;



static char const rcsid[] =
    "$Id: atags.c,v 1.0 2004/03/23 16:31:23 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 1.0 $";


/* version() - print program name and version */

void  version( void )
   {
    char *v;
    for ( v = rcsvers; *v && *v != ' '; v++ ) 
       ;
    v++;
    v[strlen(v)-1] = '\0';
    printf( "\natags        version %s\n", v );
   }



/* version() - print program name, version and help */

void  help( void )
   {
    version();
    printf( " \n\
Usage:       atags [-hFSvV] [-a<seq>] [-e<n>] [-l<seq>] [seq-file ... ]     \n\
                                                                          \n\
             where [seq-files] are in FASTA format.  The name \"-\" means \n\
             stdin.  stdin is scanned it no filemames are specified.      \n\
                                                                          \n\
Options:     -a<seq> use <seq> as anchor enzyme sequence (def. CATG)      \n\
             -e<n>   tag extent <n>, (default 17)                         \n\
             -h      print help message                                   \n\
             -l<seq> append linker sequence <seq> to short tags           \n\
                     (default GGATCCGAAGGGGTTCG)                          \n\
             -n<n>   number sequences starting at <n>                     \n\
             -F      Show fragment numbers                                \n\
             -S      Show sequence names instead of numbers               \n\
             -v      verbose mode                                         \n\
             -V      print version                                        \n\
                                                                          \n\
" );

   }

void  notyet( char opt ) 
   { fprintf( stderr, "sorry: %c option is not implemented yet\n", opt ); 
     exit(1);
   }

/* uc( str ) - convert null-terminated str into uppercase, return ptr to s */

char *uc( char *s )
   {
    char *t;
    
    for ( t = s; *t; t++ )
        *t = toupper( *t );
    return( s );
   }

/**************************************************************************/
/* parse_ags() - read command line arguments and options and set globals. */
/* returns remaining arguments as nfiles and filenames array              */
/* note to self: the invocations of atoi() and strdup() could probably be */
/* made safer with more checks                                            */
/**************************************************************************/

/* note to self: put in length checks on -a, -l, etc */

void  parse_args( int argc, char **argv, int *nfiles, char ***filenames )
   {
    extern char *optarg;
    extern int   optind;
    int          c;
    static char *def_files[] = { "-", "" };

    while ( (c = getopt( argc, argv, "a:e:Fhl:n:SvV" ) ) != -1 )
        switch( c )
           {
            case  'a':   if ( strlen( optarg ) > MAX_ANCH_LEN )
                            {
                             fprintf( stderr, 
                                      "anchor enzyme length exceeds max of %d\n",
                                      MAX_ANCH_LEN );
                             fprintf( stderr,
                            "(consider recompiling with a larger valueof MAX_ANCH_LEN)\n");
                             exit( 1 );
                            }
                         anch_enz = uc( strdup( optarg ) ); 
                         
                         break;
            case  'e':   tag_ext = atoi( optarg );
                         if ( tag_ext > MAX_TAG_EXT || tag_ext < 0 )
                            {
                             fprintf( stderr, 
                               "tag extent must be non-negative & < %d\n",
                               MAX_TAG_EXT );
                             exit( 1 );
                            }
                         break;
            case  'h':   help();
                         exit( 1 );
                         break;
            case  'l':   linker = uc( strdup( optarg ) );
                         break;
            case  'n':   seq_num = atoi( optarg ) - 1;
                         break;
            case  'F':   fragnumbers = 1;
                         break;
            case  'S':   seqnames = 1;
                         break;
            case  'v':   verbose = 1;
                         break;
            case  'V':   version();
                         exit( 0 );
            default:     help();
                         exit( 1 );
           }
    argc -= optind;
    argv += optind;
    if ( argc > 0 )
       {
        *nfiles = argc;
        *filenames = argv;
       }
    else
       {
        *nfiles = 1;
        *filenames = def_files;
       }
   }


/*********************************************************************/
/* open_file() opens a file or returns stdin if name is "-", or does */
/* error exit if file can't be opened                                */
/*********************************************************************/

FILE *open_file( char *name )
   {
    FILE *f;

    if ( strcmp( name, "-" ) == 0 )
        return( stdin );
    else
        if ( (f = fopen( name, "r" ) ) )
            return( f );
        else
           {
            perror( name );
            exit( 1 );
           }
   }

/* close_file() closes the file unless its stdin */

void  close_file( FILE *f )
   {
    if ( f != stdin )
        fclose( f );
   }


/* circular buffer is just a shifting q for now.  Improvements later */

#define MAX_CBUFF  ( (2 * MAX_TAG_EXT) + MAX_ANCH_LEN )
char   cbuff[MAX_CBUFF+1];

int    enz_pos;
int    cbuff_len;

void  init_cbuff( void )
   {
    cbuff_len = 2 * tag_ext + anch_enz_len;  /* could check against MAX_CBUFF*/
    if ( verbose ) printf( "initializing cbuff, length %d..\n", cbuff_len );
    memset( cbuff, 'X', cbuff_len );
    cbuff[cbuff_len] = '\0';
    pos = -( anch_enz_len + tag_ext );
    if ( verbose ) printf( "cbuff initialized\n" );
   }


void  insert( char c )
   {
    if ( verbose ) printf( "insert %c ", c );
    memmove( cbuff, cbuff+1, cbuff_len-1 );
    cbuff[cbuff_len - 1] = toupper( c );
    pos++;
    if ( verbose ) printf( "%10d %s\n", pos, cbuff );
   }

int  is_anchor_site( void )
   { return( strncmp( cbuff + tag_ext, anch_enz, anch_enz_len ) == 0 ); }
    

/* comp_char[c] contains the complementary nucleotide character for c */

char comp_char[] = {
                  /*          0     1     2     3     4     5     6     7   */
                  /* 000 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 010 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 020 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 030 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 040 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 050 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 060 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 070 */  'X',  'X',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 100 */  'X',  'T',  'V',  'G',  'H',  'X',  'X',  'C',
                  /* 110 */  'D',  'X',  'X',  'M',  'X',  'K',  'N',  'X',
                  /* 120 */  'X',  'X',  'Y',  'S',  'A',  'X',  'B',  'W',
                  /* 130 */  'X',  'R',  'X',  'X',  'X',  'X',  'X',  'X',
                  /* 140 */  'X',  't',  'v',  'g',  'h',  'X',  'X',  'c',
                  /* 150 */  'd',  'X',  'X',  'm',  'X',  'k',  'n',  'X',
                  /* 160 */  'X',  'X',  'y',  's',  'a',  'X',  'b',  'w',
                  /* 170 */  'X',  'r',  'X',  'X',  'X',  'X',  'X',  'X',
                 };


/* rc( s, n, r ) - put reverse complment of s (length n) into r */

void  rc( char *s, int n, char *r )
   {
    while ( n > 0 )
        *r++ = comp_char[s[--n]];
    *r = '\0';
   }

void  print_tags( char *ftag, char *rtag, int tag_ext )
   {
    static char ft[MAX_TAG_EXT];
    static char rt[MAX_TAG_EXT];

    strncpy( ft, ftag, tag_ext );
    strncpy( rt, rtag, tag_ext );
/*    printf( "%s\t%2d\tr\t%d\n", rt, seq_num, pos );
    printf( "%s\t%2d\tf\t%d\n", ft, seq_num, pos ); */
    if ( seqnames )
       {
        printf( "%s        %s        r        %d", rt, header, pos );
        if ( fragnumbers )  printf( "       %10d", frag_num++ );
        printf( "\n" );
        printf( "%s        %s        f        %d", ft, header, pos );
        if ( fragnumbers )  printf( "       %10d", frag_num );
        printf( "\n" );
       }
    else
       {
        printf( "%s        %2d        r        %d", rt, seq_num, pos );
        if ( fragnumbers )  printf( "       %10d", frag_num++ );
        printf( "\n" );
        printf( "%s        %2d        f        %d", ft, seq_num, pos );
        if ( fragnumbers )  printf( "       %10d", frag_num );
        printf( "\n" );
       }
   }


void  handle_anchor( void )
   {
    static char rtag[MAX_TAG_EXT];

    if ( verbose ) printf( "     handling anchor\n" );

    rc( cbuff, tag_ext, rtag );
    print_tags( cbuff + tag_ext + anch_enz_len, rtag, tag_ext );
   }


/* handle( c ) - handle one input character  */

void  handle( char c )
   {
    if ( isalpha( c ) )
       {                              /* if its a nucleotide,    */
        insert( c );                  /* then put it into cbuff  */
        if ( is_anchor_site() )       /* and check to see if its */
            handle_anchor();          /* our anchor enzyme seqs  */
        }
   }

/* this runs out the last part of the genome sequence through the cbuff */
/* to the matching position.                                            */

void  flush_last_seq( void )
   {
    int   i;

    for ( i = 0; i < tag_ext + anch_enz_len; i++ )
       {
        if ( verbose ) printf( "flushing %d\n", i );
        handle( 'X' );
       }
   }


void  new_sequence( FILE *f )
   {
    int  c;
    char *h;

    if ( verbose ) printf( "new sequence\n" );

    flush_last_seq(); /* flush out last bit of buffer */
    init_cbuff();     /* new sequence => starting with fresh cbuff and fresh */
                      /* state variables */
    frag_num++;
    h = header;
    while ( (c = fgetc( f )) != EOF && c != '\n' )
       {
        if ( verbose ) putchar( c );
        if ( seqnames ) *h++ = c;
       }
    if ( verbose ) printf( "  char is now [%d]\n", c );
    if ( seqnames )
       {
        *h = '\0';
        h = header;
        while ( *h && *h != ' ' && *h != '|' )
            h++;
        *h = '\0';
       }    
    seq_num++;
   }




                                 /****************/
                                 /* Main program */
                                 /****************/

main ( int argc, char **argv )
   {
    int     nfiles;
    char  **filenames;
    int     i;
    FILE   *f;
    int     c;
    char    last_char;


    parse_args( argc, argv, &nfiles, &filenames );

    anch_enz_len = strlen( anch_enz );

    init_cbuff();

    if ( verbose )
       {
        printf( "anchor:     %s\n", anch_enz );
        printf( "anchor len: %d\n", anch_enz_len );
        printf( "linker:     %s\n", linker );
        printf( "tag extent: %d\n", tag_ext );
        printf( "nfiles:     %d\n", nfiles );
        for ( i = 0; i < nfiles; i++ )
           printf( "               %s\n", filenames[i] );
       }
    
    for ( i = 0; i < nfiles; i++ )
       {
        if ( verbose )
            printf( "File:   %s\n", filenames[i] );
        f = open_file( filenames[i] );
        last_char = '\n';
        while ( (c = fgetc( f )) != EOF )
           {
            if ( c == '>' && last_char == '\n' )
               {
                new_sequence( f );
                last_char = '\n';
               }
            else 
               {
                handle( c );
                last_char = c;
               }
           }
        close_file( f );
       }
    flush_last_seq();
   }
@


1.0
log
@going to the big circus.
@
text
@d41 1
a41 1
/* $Id: atags.c,v 0.11 2004/02/06 20:42:50 mccorkle Exp mccorkle $            */ 
d64 3
a66 2
#define  MAX_TAG_EXT 100   
#define  MAX_HDR_LEN 256
d68 1
a68 1
char header[MAX_HDR_LEN];
d85 2
a86 2
    "$Id: atags.c,v 0.11 2004/02/06 20:42:50 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.11 $";
d164 11
a174 1
            case  'a':   anch_enz = uc( strdup( optarg ) ); 
d250 2
a251 2
#define MAX_CBUFF  100 
char   cbuff[MAX_CBUFF];
a257 1
    if ( verbose ) printf( "initializing cbuff..\n" );
d259 1
d263 1
@


0.11
log
@added -F option for printing out fragment numbers
@
text
@d1 43
a43 42
/* Program:       atags                                                      */
/* Programmer:    Sean R. McCorkle                                           */
/*                Biology Department, Brookhaven National Laboratory         */
/* Language:      C                                                          */
/*                                                                           */
/* Description:   Enzyme tags- simple extensions from anchor enzyme sites.   */
/*                                                                           */
/* Usage:         atags [-hFSvV] [-a<seq>] [-e<n>] [seq-file ... ]           */
/*                                                                           */
/*                where [seq-files] are in FASTA format.  The name "-" means */
/*                stdin.  stdin is scanned it no filemames are specified.    */
/*                                                                           */
/* Options:       -a<seq> use <seq> as anchor enzyme sequence (def. CATG)    */
/*                -e<n>   tag extent <n>, (default 17)                       */
/*                -h      print help message                                 */
/*                -l<seq> append linker sequence <seq> to short tags         */
/*                        (default GGATCCGAAGGGGTTCG)                        */
/*                -n<n>   number sequences starting at <n>                   */
/*                -F      Show fragment numbers                              */
/*                -S      Show sequence names instead of numbers             */
/*                -v      verbose mode                                       */
/*                -V      print version                                      */
/*                                                                           */
/* Caveats:       Sequence characters other than standard nucleotide and     */
/*                ambiguity codes will not be detected and will cause        */
/*                undefined behavior.  GIGO                                  */
/*                                                                           */
/* Compiling:     cc -O -o atags atags.c                                     */
/*                                                                           */
/*                  - usually does the job on most unix platforms            */
/*                    (including MacOSX)                                     */
/*                                                                           */
/* Notes:         What is lacking, but eventually planned:                   */
/*                    1) restriction enzyme sequences can't contain          */
/*                       ambiguity codes (or be regexps).                    */
/*                    2) ambiguity codes in sequences do not match properly  */
/*                    3) shorts are proprely handled, but not internal       */
/*                       tags with short lengths between anchor sites        */
/*                                                                           */
/* $Id: atags.c,v 0.10 2003/03/19 16:21:06 mccorkle Exp mccorkle $ */ 
/*                                                                           */
/*****************************************************************************/
d84 2
a85 2
    "$Id: atags.c,v 0.10 2003/03/19 16:21:06 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.10 $";
@


0.10
log
@changed tabs to spaces in output.
@
text
@d8 1
a8 1
/* Usage:         atags [-hvV] [-a<seq>] [-e<n>] [seq-file ... ]             */
d19 2
d40 1
a40 1
/* $Id: atags.c,v 0.9 2003/01/21 01:18:16 mccorkle Exp mccorkle $ */ 
d60 2
d64 1
d66 1
d78 2
d83 2
a84 2
    "$Id: atags.c,v 0.9 2003/01/21 01:18:16 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.9 $";
d107 1
a107 1
Usage:       atags [-hvV] [-a<seq>] [-e<n>] [-l<seq>] [seq-file ... ]     \n\
d118 2
d159 1
a159 1
    while ( (c = getopt( argc, argv, "a:e:hl:n:vV" ) ) != -1 )
d180 4
d308 18
a325 2
    printf( "%s        %2d        r        %d\n", rt, seq_num, pos );
    printf( "%s        %2d        f        %d\n", ft, seq_num, pos );
d370 1
d373 1
d377 2
d380 1
d382 2
d385 8
@


0.9
log
@changed the order of tag output - reverse tag first, then forward
(more rational - its the order encountered, and it makes downstream
programs easier)
@
text
@d35 1
a35 1
/*                    3) short tags are properly handled, but not internal   */
d38 1
a38 1
/* $Id: atags.c,v 0.8 2003/01/15 10:46:41 mccorkle Exp mccorkle $ */ 
d75 2
a76 2
    "$Id: atags.c,v 0.8 2003/01/15 10:46:41 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.8 $";
d292 4
a295 2
    printf( "%s\t%2d\tr\t%d\n", rt, seq_num, pos );
    printf( "%s\t%2d\tf\t%d\n", ft, seq_num, pos );
@


0.8
log
@fixed uc() to work on the SGI Origin 300
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.7 2003/01/14 21:48:29 mccorkle Exp mccorkle $ */ 
d75 2
a76 2
    "$Id: atags.c,v 0.7 2003/01/14 21:48:29 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.7 $";
d292 1
a293 1
    printf( "%s\t%2d\tr\t%d\n", rt, seq_num, pos );
@


0.7
log
@trying to clean up some things the new Irix 6 cc is complaining about.
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.6 2003/01/14 10:49:49 mccorkle Exp mccorkle $ */ 
d50 1
d59 1
a60 1
#define  MAX_TAG_EXT 100   
d75 2
a76 2
    "$Id: atags.c,v 0.6 2003/01/14 10:49:49 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.6 $";
d126 4
a129 3
    char *t = s;
    while ( *t )
        *t++ = toupper( *t );
@


0.6
log
@option-specified sequences (enzyme, linker) now converted immediately
to uppercase
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.5 2003/01/10 22:28:35 mccorkle Exp mccorkle $ */ 
d74 2
a75 2
    "$Id: atags.c,v 0.5 2003/01/10 22:28:35 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.5 $";
d97 15
a111 15
    printf( "
Usage:       atags [-hvV] [-a<seq>] [-e<n>] [-l<seq>] [seq-file ... ]

             where [seq-files] are in FASTA format.  The name \"-\" means
             stdin.  stdin is scanned it no filemames are specified.

Options:     -a<seq> use <seq> as anchor enzyme sequence (def. CATG)   
             -e<n>   tag extent <n>, (default 17)                      
             -h      print help message                                
             -l<seq> append linker sequence <seq> to short tags        
                     (default GGATCCGAAGGGGTTCG)                       
             -n<n>   number sequences starting at <n>
             -v      verbose mode                                      
             -V      print version 
                                    
d335 1
a335 1
    char  c;
@


0.5
log
@fixed tag output format (removed trailing blanks for \t)
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.4 2003/01/10 22:27:04 mccorkle Exp mccorkle $ */ 
d74 2
a75 2
    "$Id: atags.c,v 0.4 2003/01/10 22:27:04 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.4 $";
d121 10
d138 1
d150 1
a150 1
            case  'a':   anch_enz = strdup( optarg );
d164 1
a164 1
            case  'l':   linker = strdup( optarg );
@


0.4
log
@fixed bug with -n option
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.3 2003/01/10 22:22:27 mccorkle Exp mccorkle $ */ 
d74 2
a75 2
    "$Id: atags.c,v 0.3 2003/01/10 22:22:27 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.3 $";
d279 2
a280 2
    printf( "%-24.24s\t%2d\tf\t%d\n", ft, seq_num, pos );
    printf( "%-24.24s\t%2d\tr\t%d\n", rt, seq_num, pos );
@


0.3
log
@changing output to \t separated fields (for ease of copy into PostgreSQL)
and added -n option
@
text
@d38 1
a38 1
/* $Id: atags.c,v 0.2 2003/01/10 12:39:42 mccorkle Exp mccorkle $ */ 
d74 2
a75 2
    "$Id: atags.c,v 0.2 2003/01/10 12:39:42 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.2 $";
d155 1
a155 1
            case  'n':   seq_num = atoi( optarg );
@


0.2
log
@changing name to atags (anchor tags) because there's a unix program
called "etags"
@
text
@d18 1
d38 1
a38 1
/* $Id: atags.c,v 0.1 2003/01/10 03:01:59 mccorkle Exp mccorkle $ */ 
d68 2
a69 2
int  seq_num;              /* current sequence number.  Set in main(), and   */
                           /* incremented in new_sequence()                  */
d74 2
a75 2
    "$Id: atags.c,v 0.1 2003/01/10 03:01:59 mccorkle Exp mccorkle $";
static char rcsvers[] = "$Revision: 0.1 $";
d108 1
d136 1
a136 1
    while ( (c = getopt( argc, argv, "a:e:hl:vV" ) ) != -1 )
d155 2
d279 2
a280 2
    printf( "%-24.24s f %3d %10d\n", ft, seq_num, pos );
    printf( "%-24.24s r %3d %10d\n", rt, seq_num, pos );
a358 1
    seq_num = 0;
@


0.1
log
@going public.
@
text
@d1 1
a1 1
/* Program:       etags                                                      */
d8 1
a8 1
/* Usage:         etags [-hvV] [-a<seq>] [-e<n>] [seq-file ... ]             */
d25 1
a25 1
/* Compiling:     cc -O -o etags etags.c                                     */
d37 1
a37 1
/* $Id$ */ 
d73 2
a74 2
    "$Id$";
static char rcsvers[] = "$Revision$";
d86 1
a86 1
    printf( "\netags        version %s\n", v );
d97 1
a97 1
Usage:       etags [-hvV] [-a<seq>] [-e<n>] [-l<seq>] [seq-file ... ]
@
